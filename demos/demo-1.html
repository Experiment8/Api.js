<!DOCTYPE html>
<html>

    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <title>App.js - Roberto Lonardi - Demo 1</title>
    </head>

    <body>

        <!-- jQuery lib -->
        <script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s="   crossorigin="anonymous"></script>

        <!-- App.js main file -->
        <script type="text/javascript" src="../dist/api.js"></script>

        <!-- App.js initialization -->
        <script type="text/javascript">

            /** Callback function example */
            function makeRequest(){

                /** Create a request istance for the first 10 pages */
                var requests = [];
                for(var i = 1; i < 10; i++){

                    /** Create a request istance */
                    var request = new Api.build.Request(
                        'api/people/{{id}}/',
                        {
                            id: i
                        }
                    );

                    /** Add it to requests array */
                    requests.push(request);

                };

                /** Pass requests to get method */
                Api.get(requests).then(function(response){

                    /** This is the callback to successful calls */

                    /** Results retrieved */
                    console.info('Results retrieved', response);

                }).catch(function(error){

                    /** Errors in calls are catched here */

                    /** Results retrieved */
                    console.error('Error occurred', error);

                });

            };

            /** Create Api istance */
            var Api = api();

            /** Settings */
            var settings = {

                /** Base paths settings */
                paths: {
                    base    : '',
                    api     : 'http://swapi.co/'
                },

                /** Set logs to active */
                dev     : true,

                /** Set extensions with different path */
                ext     : [
                    '../ext/helpers.js',
                    '../ext/md5.js'
                ]
            };

            /** initialize library */
            Api.init(settings, makeRequest);

        </script>

    </body>

</html>
